<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Intelligent Excuse Generator</title>
  <link rel="icon" type="image/png" href="static/favicon.png" />
  <link rel="manifest" href="static/manifest.json" />
  <!-- Full Inter and Rajdhani fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Rajdhani:wght@500;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="static/style.css">
</head>

<body>
  <!-- Video Background Container -->
  <div class="video-background">
    <video id="background-video" autoplay loop muted playsinline>
      <source id="video-source-webm" src="static/background-light.webm" type="video/webm" />
      <source id="video-source" src="static/background-light.mp4" type="video/mp4" />
    </video>
    <div class="video-overlay"></div>
  </div>

  <!-- DARKâ€‘MODE TOGGLE -->
  <div class="theme-switch-wrapper">
    <label class="theme-switch">
      <input type="checkbox" id="themeToggle" onchange="toggleDarkModeSwitch()" />
      <span class="slider"></span>
    </label>
    <div id="themeLabel" class="theme-switch-label">ğŸŒ Light Mode</div>
  </div>

  <div class="container">
    <div class="typewriter-wrap">
      <h2 class="cyber-title effect-title">Intelligent Excuse Generator</h2>
    </div>

    <!-- EXCUSE FORM -->
    <label for="scenario">Scenario:</label>
    <input id="scenario" placeholder="Type your excuse scenario hereâ€¦" />
    <ul id="memorySuggest"
      style="display:none;margin:4px 0 8px;padding:6px 10px;background:#f1f1f1;border-radius:8px;font-size:14px"></ul>

    <label for="urgency">Urgency:</label>
    <select id="urgency">
      <option value="low">Low</option>
      <option value="medium">Medium</option>
      <option value="high">High</option>
      <option value="critical">Critical</option>
    </select>

    <label for="excuseStyle">Excuse Style:</label>
    <select id="excuseStyle">
      <option value="professional">Professional</option>
      <option value="creative">Creative</option>
    </select>

    <label for="language">Output Language:</label>
    <select id="language">
      <option value="en">English</option>
      <option value="hi">Hindi</option>
      <option value="fr">French</option>
      <option value="es">Spanish</option>
      <option value="de">German</option>
    </select>

    <button class="teal action-btn" onclick="getExcuse()">Generate Excuse</button>
    <p id="excuseOut"></p>
    <p id="translatedOut"></p>
    <button class="teal action-btn" onclick="playVoice()">ğŸ”Š Speak</button>

    <div class="toggle-btns">
      <button class="round-toggle" onclick="toggleBox('historyBox',this)">ğŸ“œ</button>
      <button class="round-toggle" onclick="toggleBox('favoritesBox',this)">â­</button>
      <button class="round-toggle" onclick="saveFavorite()">â¤ï¸</button>
      <button class="round-toggle" onclick="toggleBox('calendarBox',this)">ğŸ“…</button>
      <button class="round-toggle" onclick="toggleBox('rankingsBox',this)">ğŸ†</button>
    </div>

    <div id="historyBox" class="toggle-box">
      <h4>ğŸ“œ History</h4>
      <ul id="historyList"></ul>
    </div>
    <div id="favoritesBox" class="toggle-box">
      <h4>â­ Favourites</h4>
      <ul id="favoritesList"></ul>
    </div>
    <div id="calendarBox" class="toggle-box">
      <h4>ğŸ“… Excuse Calendar</h4>
      <ul id="calendarList"></ul>
    </div>
    <div id="rankingsBox" class="toggle-box">
      <h4 style="display:flex;justify-content:space-between;align-items:center;margin:0">
        <span>ğŸ† Top Excuses (AI Rankings)</span>
        <button class="small-round-btn" onclick="clearTopExcuses()" title="Clear">ğŸ—‘ï¸</button>
      </h4>
      <ul id="rankingsList"></ul>
    </div>

    <hr />

    <!-- APOLOGY FORM -->
    <label for="apologyContext">Apology context:</label>
    <input id="apologyContext" placeholder="e.g., I forgot my friend's birthday" />

    <label for="tone">Tone:</label>
    <select id="tone">
      <option>Emotional</option>
      <option>Formal</option>
      <option>Casual</option>
    </select>

    <label for="messageType">Type:</label>
    <select id="messageType">
      <option>Short</option>
      <option>Long</option>
    </select>

    <label for="apologyStyle">Style:</label>
    <select id="apologyStyle">
      <option>Regular</option>
      <option>Guilt Tripping</option>
    </select>

    <button class="teal action-btn" onclick="generateApology()">Generate Apology</button>
    <button class="teal action-btn" onclick="showGuiltScore()">ğŸ§  Guilt Meter</button>
    <button class="teal action-btn" onclick="playApologyVoice()">ğŸ”Š Speak</button>

    <div class="toggle-btns">
      <button class="round-toggle" onclick="toggleBox('apolHistoryBox',this)">ğŸ“œ</button>
      <button class="round-toggle" onclick="toggleBox('apolFavBox',this)">â­</button>
      <button class="round-toggle" onclick="saveApologyFavorite()">â¤ï¸</button>
      <button class="round-toggle" onclick="toggleBox('apolCalBox',this)">ğŸ“…</button>
      <button class="round-toggle" onclick="toggleBox('apolTopBox',this)">ğŸ†</button>
    </div>
    <p id="apologyOut"></p>

    <div id="apolHistoryBox" class="toggle-box">
      <h4>ğŸ“œ Apology History</h4>
      <ul id="apolHistoryList"></ul>
    </div>
    <div id="apolFavBox" class="toggle-box">
      <h4>â­ Favourite Apologies</h4>
      <ul id="apolFavList"></ul>
    </div>
    <div id="apolCalBox" class="toggle-box">
      <h4>ğŸ“… Apology Calendar</h4>
      <ul id="apolCalList"></ul>
    </div>
    <div id="apolTopBox" class="toggle-box">
      <h4 style="display:flex;justify-content:space-between;align-items:center;margin:0">
        <span>ğŸ† Top Apologies (AI Rankings)</span>
        <button class="small-round-btn" onclick="clearTopApologies()" title="Clear">ğŸ—‘ï¸</button>
      </h4>
      <ul id="apolTopList"></ul>
    </div>

    <div style="margin-top: 20px">
      <label for="adjustTone">Adjust Tone:</label>
      <select id="adjustTone">
        <option value="">Pick toneâ€¦</option>
        <option value="empathetic">Empathetic</option>
        <option value="firm">Firm</option>
        <option value="formal">Formal</option>
        <option value="casual">Casual</option>
      </select>
      <button class="teal action-btn" onclick="applyTone()">ğŸ¯ Adjust Tone</button>
    </div>

    <div style="margin-top: 12px">
      <label for="startApology">Start Apology:</label>
      <input id="startApology" placeholder="e.g., Sorry I missed itâ€¦" />
      <button class="teal action-btn" onclick="completeApology()">ğŸ¤– Autoâ€‘Complete</button>
    </div>
    <hr />

    <h4>ğŸ“… Schedule Mail</h4>
    <label for="scheduleDate">Date:</label><input type="date" id="scheduleDate" />
    <label for="scheduleTime">Time:</label><input type="time" id="scheduleTime" />
    <label for="scheduleRecipients">Recipients (optional):</label>
    <input id="scheduleRecipients" placeholder="a@b.com, c@d.com" />
    <button class="teal action-btn" onclick="scheduleEmergency()">â° Schedule</button>

    <hr />

    <label for="recipientEmail">Eâ€‘Mail Recipients:</label>
    <input id="recipientEmail" placeholder="a@b.com, c@d.com" />
    <button class="teal action-btn" onclick="triggerEmergency()">ğŸš¨ EMERGENCY</button>

    <hr />

    <div style="display: flex; justify-content: center; gap: 10px; margin-top: 16px;">
      <button id="btnExcuseShot" class="teal action-btn" onclick="generateScreenshot('excuse')">ğŸ“¸ Screenshot
        Excuse</button>
      <button id="btnApologyShot" class="teal action-btn" onclick="generateScreenshot('apology')">ğŸ“¸ Screenshot
        Apology</button>
    </div>

    <img id="proofImg"
      style="display:none;margin:10px auto;max-width:90%;border-radius:8px;box-shadow:0 4px 16px rgba(0,0,0,0.2);" />
    <button id="downloadBtn" class="teal action-btn" style="display:none;">Download Image</button>

  </div>

  <img class="proof-logo" src="static/images/logo.png" alt="logo" />
  <p class="proof-watermark">Ch Aarush Udbhav</p>
  <p class="proof-timestamp" id="timestamp"></p>
  <audio id="clickSound" src="/static/click.mp3" preload="auto"></audio>
  <script src="static/script.js"></script>
</body>

</html>